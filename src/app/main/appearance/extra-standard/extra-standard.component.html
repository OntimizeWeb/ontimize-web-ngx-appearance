<o-form #oForm fxLayout="column" show-header="yes" label-header="sales_budgets" header-actions="R;U;D" entity="ESalesBudgets"
  service="ESalesBudgets" (onFormDataLoaded)="onSalesBudgetsDataLoaded($event)" keys="idSalesBudget">

  <o-row layout-gap="14px" layout-padding-vertical>
    <o-combo fxFlex="0 1 calc(50% - 14px)" attr="COMPANY" value-column="id" columns="id;name" visible-columns="name"
      data="1" required read-only="yes" entity="ECompanys"></o-combo>
    <o-combo fxFlex="0 1 calc(50% - 14px)" attr="DIVISION" label="DIVISION" query-on-init="no" query-on-bind="no"></o-combo>
  </o-row>

  <o-row layout-gap="14px" layout-padding-vertical>
    <o-text-input fxFlex="0 1 calc(25% - 14px)" attr="SALES_BUDGET_ID" required read-only="yes"></o-text-input>
    <o-combo fxFlex="0 1 calc(25% - 14px)" attr="VERSION" label="VERSION" value-column="version" columns="version"
      entity="EVersionsSalesBudgets"></o-combo>
    <o-text-input fxFlex="0 1 calc(50% - 14px)" attr="PROFORMA" read-only="yes"></o-text-input>
  </o-row>

  <o-row layout-gap="14px" layout-padding-vertical>
    <o-list-picker fxFlex="0 1 calc(50% - 14px)" attr="CUSTOMER_ID" value-column="id" columns="id;name" visible-columns="name"
      entity="ECustomer" read-only="yes"></o-list-picker>
    <o-combo fxFlex="0 1 calc(30% - 14px)" attr="BUSINESS_GROUP" value-column="id" columns="id;name" visible-columns="name"
      entity="EBusinessGroup"></o-combo>
    <o-checkbox fxFlex="0 1 calc(20% - 14px)" attr="CONDITIONS_APPLICANT" label="CONDITIONS_APPLICANT"></o-checkbox>
  </o-row>
  <o-row layout-gap="14px" layout-padding-vertical>
    <o-list-picker fxFlex="0 1 calc(50% - 14px)" attr="POTENCIAL" query-on-init="no" query-on-bind="no" read-only="yes"></o-list-picker>
    <o-list-picker fxFlex="0 1 calc(50% - 14px)" attr="Cliente facturación" value-column="id" columns="id;name"
      visible-columns="name" read-only="yes"></o-list-picker>
  </o-row>
  <o-row layout-gap="14px" layout-padding-vertical>

    <o-combo fxFlex="25" attr="SALESMAN" entity="ESalesman" value-column="id" columns="id;name;surname" visible-columns="name;surname"
      separator=","></o-combo>
    <o-currency-input fxFlex="25" attr="COMMISION" decimal-digits="2" min-decimal-digits="2" max-decimal-digits="2"></o-currency-input>
    <o-combo fxFlex="50" attr="TYPE" query-on-init="no" query-on-bind="no"></o-combo>
  </o-row>

  <o-row layout-gap="14px" layout-padding-vertical>
    <o-currency-input fxFlex="25" attr="TOTALBASE" decimal-digits="2" min-decimal-digits="2" max-decimal-digits="2"></o-currency-input>
    <o-currency-input fxFlex="25" attr="TOTAL" decimal-digits="2" min-decimal-digits="2" max-decimal-digits="2"></o-currency-input>
    <o-date-input fxFlex="25" attr="DATE_DOCUMENT" label="F. documento"></o-date-input>
    <o-checkbox fxFlex="25" attr="ACCEPTED" label="Aceptado" enabled="no"></o-checkbox>
  </o-row>

  <o-currency-input attr="MINIMUN_AMOUN" decimal-digits="2" min-decimal-digits="2" max-decimal-digits="2" read-only="yes"
    fxFlex="25"></o-currency-input>

  <mat-tab-group>
    <mat-tab label="Básico">
      <o-column title="Dirección fiscal">
        <o-row layout-gap="14px" layout-padding-vertical>
          <o-text-input fxFlex="75" attr="direccionfiscal" enabled="no" data="C/ José Manuel Guimerá, 3-4º"></o-text-input>
          <o-text-input fxFlex="25" attr="cpfiscal" enabled="no" data="38003"></o-text-input>
        </o-row>
        <o-row layout-gap="14px" layout-padding-vertical>
          <o-combo fxFlex attr="País" value-column="id" columns="id;name" visible-columns="name" [static-data]="countryData"
            data="1" enabled="no"></o-combo>
          <o-combo fxFlex attr="Provincia" query-on-init="no" query-on-bind="no" enabled="no"></o-combo>
          <o-text-input fxFlex attr="Localidad" data="Tenerife" enabled="no"></o-text-input>
        </o-row>
      </o-column>

      <o-column-collapsible title="Datos cliente">
        <o-combo fxFlex attr="address" label="direccioncliente" query-on-init="no" query-on-bind="no"
          layout-padding-vertical></o-combo>
        <o-row layout-gap="14px" layout-padding-vertical>
          <o-text-input fxFlex="75" attr="address2" label="Dirección"></o-text-input>
          <o-text-input fxFlex="25" attr="cp" label="C.P."></o-text-input>
        </o-row>
        <o-row layout-gap="14px" layout-padding-vertical>
          <o-combo fxFlex attr="country" label="País" query-on-init="no" query-on-bind="no"></o-combo>
          <o-combo fxFlex attr="province" label="Provincia" query-on-init="no" query-on-bind="no" enabled="no"></o-combo>
          <o-text-input fxFlex attr="locality" label="Localidad"></o-text-input>
        </o-row>
        <o-list-picker fxFlex attr="Contacto" query-on-init="no" query-on-bind="no" layout-gap="14px"></o-list-picker>
      </o-column-collapsible>
      <o-column title="Datos transporte">
        <o-row layout-gap="14px" layout-padding-vertical>
          <o-combo fxFlex="50" attr="Tipo de transporte" value-column="id" columns="id;name" visible-columns="name"
            [static-data]="transportType" data="1"></o-combo>
          <o-combo fxFlex="50" attr="modelo" value-column="id" columns="id;name" visible-columns="name" [static-data]="transportType"
            data="1"></o-combo>
        </o-row>

        <o-row layout-gap="14px" layout-padding-vertical>
          <o-combo fxFlex="33" attr="Transportista" query-on-init="no" query-on-bind="no"></o-combo>
          <o-text-input fxFlex attr="Matrícula"></o-text-input>
          <o-text-input fxFlex attr="Ref. transportista"></o-text-input>
        </o-row>
        <o-row>
          <o-text-input fxFlex attr="Kilos" data="0"></o-text-input>
          <o-integer-input fxFlex attr="m3" data="0"></o-integer-input>
          <o-integer-input fxFlex attr="Bultos" data="0"></o-integer-input>
        </o-row>
      </o-column>
      <o-row title="Incoterm" layout-gap="14px">
        <o-combo fxFlex attr="Incoterm" query-on-init="no" query-on-bind="no"></o-combo>
        <o-text-input fxFlex attr="Lugar de entrega"></o-text-input>
      </o-row>
      <o-row layout-gap="14px" layout-padding-vertical>
        <o-column fxFlex title="Oferta cliente">
          <o-textarea-input attr="Oferta cliente"></o-textarea-input>
        </o-column>
        <o-column fxFlex title="Observaciones">
          <o-textarea-input attr="Observaciones"></o-textarea-input>
        </o-column>
      </o-row>
    </mat-tab>
    <mat-tab label="Líneas">
      <mat-tab-group>
        <mat-tab label="Líneas">
          <o-row>
            <o-column fxFlex title="Descuentos">
              <o-combo fxFlex attr="Dto. general" query-on-init="no" query-on-bind="no"></o-combo>
              <o-row>
                <o-checkbox fxFlex attr="defineTotalAmount" label="Definir importe total"></o-checkbox>
                <o-currency-input fxFlex attr="totalAmountDefined" label="Importe total definido" enabled="no"></o-currency-input>
              </o-row>
            </o-column>
            <o-column fxFlex title="Agencia">
              <o-row>
                <o-percent-input fxFlex attr="Margen agencia" decimal-digits="2" data="25"></o-percent-input>
                <o-percent-input fxFlex attr="Margen negociación" decimal-digits="2" data="5"></o-percent-input>
              </o-row>
              <o-percent-input fxFlex="50" attr="Comisión" decimal-digits="2" data="1"></o-percent-input>
            </o-column>
          </o-row>
          <o-row>
            <span fxFlex></span>

            <o-column fxFlex title="Distribuidor">
              <o-percent-input fxFlex="50" attr="Descuentro distribuidor" decimal-digits="2" data="0"></o-percent-input>
            </o-column>
          </o-row>
          <o-table attr="accounts" title="Artículos" [static-data]="tableData" query-on-init="no" columns="ID;COD_ARTICULO;DESCRIPCION;CANTIDAD;CANTIDAD_REAL;TARIFA;PRECIO_UNITARIO;IMPORTE_UNITARIO_NETO;IMPORTE_BRUTO;IMPORTE_NETO;BASE_IMPONIBLE;IMPORTE_TOTAL"
            visible-columns="COD_ARTICULO;DESCRIPCION;CANTIDAD;CANTIDAD_REAL;TARIFA;PRECIO_UNITARIO;IMPORTE_UNITARIO_NETO;IMPORTE_BRUTO;IMPORTE_NETO;BASE_IMPONIBLE;IMPORTE_TOTAL"
            row-height="small">

            <o-table-column attr="PHOTO" orderable="no" searchable="no">
              <o-table-cell-renderer-integer>
              </o-table-cell-renderer-integer>
            </o-table-column>


          </o-table>
        </mat-tab>
        <mat-tab label="Resumen"></mat-tab>
      </mat-tab-group>
    </mat-tab>

  </mat-tab-group>
</o-form>